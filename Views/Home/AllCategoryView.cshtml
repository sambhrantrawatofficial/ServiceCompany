@{
    ViewData["Title"] = "All Categories";
    var categories = ViewBag.Categories;
}

<div class="container mt-5 mb-5">

    <!-- Heading -->
    <div class="text-center mb-4">
        <h2 class="fw-bold">All Categories</h2>
        <p class="text-muted mb-0">Explore services with real customer ratings</p>
    </div>

    <!-- Categories Grid -->
    <div class="row">
        @if (categories != null && categories.Count > 0)
        {
            foreach (var item in categories)
            {
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card service-card h-100 align-items-center shadow-sm position-relative">

                        <!-- Category Image -->
                        <img src="@item.CategoryImage"
                             class="card-img-top bw-img"
                             alt="@item.CategoryName"
                             onerror="this.src='https://via.placeholder.com/300x180';"
                             style="height:15rem; object-fit:cover;" />

                        <div class="card-body text-center">
                            <h6 class="mb-1 fw-semibold">@item.CategoryName</h6>

                            @if (item.AvgRating > 0)
                            {
                                <small class="text-muted">⭐ @Math.Round(item.AvgRating, 1)</small>
                            }
                            else
                            {
                                <small class="text-muted">No ratings yet</small>
                            }
                        </div>

                        <!-- Stretched link makes the whole card clickable -->
                        <a asp-controller="Home"
                           asp-action="CategoryMoreInfo"
                           asp-route-id="@item.CategoryId"
                           class="stretched-link"></a>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-12 text-center">
                <p class="text-muted">No categories available at the moment.</p>
            </div>
        }
    </div>
</div>
